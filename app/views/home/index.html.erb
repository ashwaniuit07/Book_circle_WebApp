<div data-controller="hello public"
     class="relative w-full min-h-screen flex flex-col items-center justify-start text-center
            bg-gradient-to-r from-black via-gray-500 to-white overflow-hidden py-16">

  <!-- App Description (Always visible) -->
  <div class="bg-gray-900 bg-opacity-70 backdrop-blur-lg p-8 rounded-2xl shadow-lg mb-10 max-w-xl z-40 relative">
    <h1 class="text-4xl md:text-5xl font-bold text-white mb-4 drop-shadow-lg">Welcome to BookCircle ðŸ“š</h1>
    <p class="text-gray-200 text-lg drop-shadow-md">
      BookCircle is a modern platform connecting students and schools to buy, sell, and share books easily.
      Choose your category below to get started.
    </p>
  </div>

  <!-- Main Selection Boxes -->
  <div data-public-target="mainBoxes"
       class="grid grid-cols-1 sm:grid-cols-2 gap-8 w-full max-w-4xl transition-all duration-500 ease-in-out z-20 relative">

    <!-- Public -->
    <div data-action="click->public#showSignupForm"
         class="cursor-pointer bg-gray-800 text-white rounded-2xl p-12 shadow-lg hover:shadow-2xl 
                transition duration-300 transform hover:scale-105">
      <h2 class="text-2xl font-bold mb-2">Public User</h2>
      <p>Signup or login as a public user to buy/sell books.</p>
    </div>

    <!-- School -->
    <div data-action="click->hello#showSchoolOptions"
         class="cursor-pointer bg-gray-800 text-white rounded-2xl p-12 shadow-lg hover:shadow-2xl 
                transition duration-300 transform hover:scale-105">
      <h2 class="text-2xl font-bold mb-2">School / Student</h2>
      <p>Login as school admin or student to manage and share books.</p>
    </div>
  </div>

  <!-- School Sub-Options (Hidden initially) -->
  <div data-hello-target="schoolOptions"
       class="mt-8 hidden grid grid-cols-1 sm:grid-cols-2 gap-8 w-full max-w-4xl transition-all duration-500 
              ease-in-out opacity-0 z-20 relative">

    <%= link_to new_user_registration_path,
                class: "cursor-pointer bg-gray-700 text-white rounded-2xl p-12 shadow-lg hover:shadow-2xl 
                        transition duration-300 transform hover:scale-105" do %>
      <h2 class="text-2xl font-bold mb-2">Student</h2>
      <p>Signup or login as a student.</p>
    <% end %>

    <%= link_to new_user_registration_path,
                class: "cursor-pointer bg-gray-700 text-white rounded-2xl p-12 shadow-lg hover:shadow-2xl 
                        transition duration-300 transform hover:scale-105" do %>
      <h2 class="text-2xl font-bold mb-2">School Admin</h2>
      <p>Signup or login as school admin.</p>
    <% end %>
  </div>

  <!-- Public Form Section (Appears Below the Welcome Card) -->
  <div data-public-target="formSection"
       class="hidden mt-10 w-full max-w-md bg-gray-900 bg-opacity-90 p-8 rounded-2xl shadow-lg 
              text-left text-white transition-all duration-500 ease-in-out z-30 relative">

    <!-- Back Button -->
    <button data-action="click->public#closeForm"
            class="absolute top-4 right-4 text-gray-400 hover:text-white text-xl font-bold">
      âœ•
    </button>

    <!-- Sign Up Form -->
    <div data-public-target="signupForm">
      <h2 class="text-2xl font-bold mb-6 text-center">Public Signup</h2>

      <%= form_with(model: User.new, url: user_registration_path, local: true) do |f| %>


        <div class="mb-4">
          <%= f.label :name, class: "block mb-1" %>
          <%= f.text_field :name, class: "w-full p-2 rounded text-black" %>
        </div>
        <div class="mb-4">
          <%= f.label :email, class: "block mb-1" %>
          <%= f.email_field :email, class: "w-full p-2 rounded text-black" %>
        </div>

        <div class="mb-4">
          <%= f.label :password, class: "block mb-1" %>
          <%= f.password_field :password, class: "w-full p-2 rounded text-black" %>
        </div>

        <div class="mb-6">
          <%= f.label :password_confirmation, class: "block mb-1" %>
          <%= f.password_field :password_confirmation, class: "w-full p-2 rounded text-black" %>
        </div>

        <%= f.submit "Sign Up", class: "bg-blue-600 hover:bg-blue-700 w-full py-2 rounded font-semibold" %>
      <% end %>

      <p class="mt-4 text-center text-gray-300">
        Already have an account?
        <span data-action="click->public#showLoginForm"
              class="text-blue-400 cursor-pointer hover:underline">Login</span>
      </p>
    </div>

    <!-- Login Form -->
    <div data-public-target="loginForm" class="hidden">
      <h2 class="text-2xl font-bold mb-6 text-center">Public Login</h2>

      <%= form_with(url: user_session_path, local: true) do |f| %>
        <div class="mb-4">
          <%= f.label :email, class: "block mb-1" %>
          <%= f.email_field :email, class: "w-full p-2 rounded text-black" %>
        </div>

        <div class="mb-6">
          <%= f.label :password, class: "block mb-1" %>
          <%= f.password_field :password, class: "w-full p-2 rounded text-black" %>
        </div>

        <%= f.submit "Login", class: "bg-green-600 hover:bg-green-700 w-full py-2 rounded font-semibold" %>
      <% end %>

      <p class="mt-4 text-center text-gray-300">
        Donâ€™t have an account?
        <span data-action="click->public#showSignupForm"
              class="text-blue-400 cursor-pointer hover:underline">Sign up</span>
      </p>
    </div>
  </div>
</div>
